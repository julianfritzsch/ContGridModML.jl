<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Public · ContGridModML</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">ContGridModML</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Introduction</a></li><li><span class="tocitem">API</span><ul><li class="is-active"><a class="tocitem" href>Public</a><ul class="internal"><li><a class="tocitem" href="#Contents"><span>Contents</span></a></li><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#Structs"><span>Structs</span></a></li><li><a class="tocitem" href="#Functions"><span>Functions</span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-2-2" type="checkbox"/><label class="tocitem" for="menuitem-2-2"><span class="docs-label">Internal</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../internal/dynamic/">Dynamic.jl</a></li><li><a class="tocitem" href="../internal/static/">Static.jl</a></li><li><a class="tocitem" href="../internal/tools/">Tools.jl</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">API</a></li><li class="is-active"><a href>Public</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Public</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/julianfritzsch/ContGridModML.jl/blob/main/docs/src/api/public.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Public-API"><a class="docs-heading-anchor" href="#Public-API">Public API</a><a id="Public-API-1"></a><a class="docs-heading-anchor-permalink" href="#Public-API" title="Permalink"></a></h1><p>Exported functions and types of <code>ContGridMod.jl</code>.</p><h2 id="Contents"><a class="docs-heading-anchor" href="#Contents">Contents</a><a id="Contents-1"></a><a class="docs-heading-anchor-permalink" href="#Contents" title="Permalink"></a></h2><ul><li><a href="#Public-API">Public API</a></li><li class="no-marker"><ul><li><a href="#Contents">Contents</a></li><li><a href="#Index">Index</a></li><li><a href="#Structs">Structs</a></li><li><a href="#Functions">Functions</a></li></ul></li></ul><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#ContGridModML.DynamicSol"><code>ContGridModML.DynamicSol</code></a></li><li><a href="#ContGridModML.StaticSol"><code>ContGridModML.StaticSol</code></a></li><li><a href="#ContGridModML.learn_dynamical_parameters"><code>ContGridModML.learn_dynamical_parameters</code></a></li><li><a href="#ContGridModML.learn_susceptances"><code>ContGridModML.learn_susceptances</code></a></li><li><a href="#ContGridModML.load_sol"><code>ContGridModML.load_sol</code></a></li><li><a href="#ContGridModML.save_sol"><code>ContGridModML.save_sol</code></a></li></ul><h2 id="Structs"><a class="docs-heading-anchor" href="#Structs">Structs</a><a id="Structs-1"></a><a class="docs-heading-anchor-permalink" href="#Structs" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="ContGridModML.StaticSol" href="#ContGridModML.StaticSol"><code>ContGridModML.StaticSol</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Contains the results of the static training.</p><ul><li><code>b::Vector{&lt;:Real}</code>: Vector of the nodal susceptances. The ordering is alternating <span>$b_x$</span> and <span>$b_y$</span>. The values are ordered in the same order as in the DoF handler <code>cm.dh₁</code>.</li></ul><ul><li><code>losses::Matrix{&lt;:Real}</code>: The training losses. The row corresponds to the epoch and the column to the data set.</li></ul><ul><li><code>train_pred::Matrix{&lt;:Real}</code>: Prediction of the values for each training data set with the trained values.</li></ul><ul><li><code>test_pred::Matrix{&lt;:Real}</code>: Prediction of the values for each test data set with the trained values.</li></ul><ul><li><code>t_train::Matrix{&lt;:Real}</code>: Ground truth data for the training data sets.</li></ul><ul><li><code>t_test::Matrix{&lt;:Real}</code>: Ground truth data for the test data sets.</li></ul><ul><li><code>train_losses::Vector{&lt;:Real}</code>: Loss values for all training data sets.</li></ul><ul><li><code>test_losses::Vector{&lt;:Real}</code>: Loss values for all test data sets.</li></ul><ul><li><code>model::ContGridMod.ContModel</code>: The continuous model with the updated susceptances.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/julianfritzsch/ContGridModML.jl/blob/6390688616ca4e6cf6246d054b17957d574fe3f0/src/ContGridModML.jl#L21-L25">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ContGridModML.DynamicSol" href="#ContGridModML.DynamicSol"><code>ContGridModML.DynamicSol</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Contains the results of the dynamic training.</p><ul><li><code>train_ix::Vector{&lt;:Integer}</code>: Indices of the generators used to create the training ground truth data.</li></ul><ul><li><code>test_ix::Vector{&lt;:Integer}</code>: Indices of the generators used to create the training ground truth data.</li></ul><ul><li><code>comp_ix::Vector{&lt;:Integer}</code>: Indices of the nodes on which the frequency is compared to calculate the loss function.</li></ul><ul><li><code>m::Vector{&lt;:Real}</code>: Vector of the nodal inertia. The values are ordered in the same order as in the DoF handler <code>cm.dh₁</code>.</li></ul><ul><li><code>d::Vector{&lt;:Real}</code>: Vector of the nodal damping. The values are ordered in the same order as in the DoF handler <code>cm.dh₁</code>.</li></ul><ul><li><code>coeffs::Vector{&lt;:Real}</code>: Coefficients of the modal expansion of the dynamical parameters. The realtion between the nodal values, the coefficients, and the eigenvectors is given by<pre><code class="language-julia hljs">n = size(coeffs, 1) ÷ 2
m = eve[:, 1:n] * coeffs[1:n]
d = eve[:, 1:n] * coeffs[n+1:end]</code></pre></li></ul><ul><li><code>eve::Matrix{&lt;:Real}</code>: Eigenvectors of the unweighted Laplacian of the grid of the continuous model.</li></ul><ul><li><code>losses::Matrix{&lt;:Real}</code>: The training losses. The row corresponds to the epoch and the column to the data set.</li></ul><ul><li><code>train_losses::Vector{&lt;:Real}</code>: Loss values for all training data sets.</li></ul><ul><li><code>test_losses::Vector{&lt;:Real}</code>: Loss values for all test data sets.</li></ul><ul><li><code>model::ContGridMod.ContModel</code>: The continuous model with updated inertia and damping.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/julianfritzsch/ContGridModML.jl/blob/6390688616ca4e6cf6246d054b17957d574fe3f0/src/ContGridModML.jl#L66-L70">source</a></section></article><h2 id="Functions"><a class="docs-heading-anchor" href="#Functions">Functions</a><a id="Functions-1"></a><a class="docs-heading-anchor-permalink" href="#Functions" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="ContGridModML.learn_susceptances" href="#ContGridModML.learn_susceptances"><code>ContGridModML.learn_susceptances</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">learn_susceptances(
;
    train_fn,
    test_fn,
    grid_fn,
    n_train,
    n_test,
    n_epochs,
    n_batches,
    tf,
    κ,
    σ,
    seed,
    bmin,
    δ
) -&gt; ContGridModML.StaticSol
</code></pre><p>Learn the line susceptances.</p><p>The parameters are learned by calculating the stable solution for multiple dispatches and comparing them to the results from the discrete model. The comparison points are obtained by using the liear approximation provided by the finite element method.</p><p><strong>Arguments</strong></p><ul><li><code>train_fn::String = MODULE_FOLDER * &quot;/data/ml/training_</code>&quot;: The names of the files   containing the training scenarios. The files must be labeled <code>train_fn1.h5</code>,   <code>train_fn2.h5</code>, etc.</li><li><code>test_fn::String = MODULE_FOLDER * &quot;/data/ml/test_&quot;</code>: The names of the files   containing the test scenarios. The files must be labeled <code>test.h5</code>, <code>test.h5</code>, etc.</li><li><code>grid_fn::String = MODULE_FOLDER * &quot;/data/panta.msh&quot;</code>: Name of the file containing the mesh</li><li><code>n_train::Int = 48</code>: Number of training data sets</li><li><code>n_test::Int = 12</code>: Number of test data sets</li><li><code>n_epochs::Int = 10000</code>: Number of epochs</li><li><code>n_batches::Int = 3</code>: Number of batches per epoch</li><li><code>tf::Real = 0.05</code>: Duration of the heat equation diffusion for the power distribution </li><li><code>κ::Real = 0.02</code>: Diffusion constant of the heat equation diffusion for the power   distribution</li><li><code>σ::Real = 0.01</code>: Standard deviation for the initial Gaussian distribution of the   parameters</li><li><code>seed::Union{Nothing, Integer} = 1709</code>: Seed for the ranom selection of batches and the   initial guess of <span>$b_x$</span> and <span>$b_y$</span></li><li><code>bmin::Real = 0.1</code>: Minimimum value of the suscpetances</li><li><code>δ = 0.5</code>: Parameter of the Huber loss function</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/julianfritzsch/ContGridModML.jl/blob/6390688616ca4e6cf6246d054b17957d574fe3f0/src/static.jl#L250">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ContGridModML.learn_dynamical_parameters" href="#ContGridModML.learn_dynamical_parameters"><code>ContGridModML.learn_dynamical_parameters</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">learn_dynamical_parameters(
;
    dm_fn,
    cm_fn,
    dP,
    n_train,
    n_test,
    dt,
    tf,
    disc_solve_kwargs,
    cont_solve_kwargs,
    lambda_solve_kwargs,
    seed,
    σ,
    n_points,
    n_coeffs,
    n_modes,
    n_epochs,
    max_function,
    train_ix,
    test_ix
) -&gt; ContGridModML.DynamicSol
</code></pre><p>Learn the inertia and damping distribution for the continuous model.</p><p>The frequency response of faults at multiple generators are compared on homogeneously spread buses across the grid. The gradient is calculated using an adjoint sensitivity method and the updates to the parameters are calculated using a constraint gradient descent method.</p><p><strong>Arguments</strong></p><ul><li><code>dm_fn::String = MODULE_FOLDER * &quot;/data/dm.h5&quot;</code>: File name of the discrete model</li><li><code>cm_fn::String = MODULE_FOLDER * &quot;/data/cm.h5&quot;</code>: File name of the continuous model</li><li><code>dP::Real = -9.0</code>: Fault size to be simulated</li><li><code>n_train::Integer = 12</code>: Amount of faults to consider for training</li><li><code>n_test::Integer = 4</code>: Amount of faults to consider for testing</li><li><code>dt::Real = 0.01</code>: Step size at which the solutions of the ODEs are saved</li><li><code>tf::Real = 25.0</code>: Duration of the simulations</li><li><code>disc_solve_kwargs::Dict{Symbol, &lt;:Any} = Dict{Symbol, Any}()</code>: Keyword arguments passed  to the ODE solver for the discrete model</li><li><code>cont_solve_kwargs::Dict{Symbol, &lt;:Any} = Dict{Symbol, Any}()</code>: Keyword arguments passed  to the ODE solver for the continuous model</li><li><code>lambda_solve_kwargs::Dict{Symbol, &lt;:Any} = Dict{Symbol, Any}(:saveat =&gt; 0.1,  :abstol =&gt; 1e-3, :reltol =&gt; 1e-2)</code>: Keyword arguments passed to the ODE solver of the  adjoint equations</li><li><code>seed::Union{Nothing, Integer} = 1709</code>: Seed for the random number generator to be used   to pick the training and test generators</li><li><code>σ = 0.05</code>: Standard deviation of the Gaussian used to distribute the fault</li><li><code>n_points = 40</code>: Number of points for comparison along the largest dimension</li><li><code>n_coeffs = 1</code>: Number of coefficients that are non-zero at the beginning of the  training. They correspond to the <code>n_coeffs</code> lowest modes of the Laplacian.</li><li><code>n_modes = 20</code>: Number of modes the Laplacian that are used to expand the parameters.</li><li><code>n_epochs = 8000</code>: Number of epochs used for the training.</li><li><code>max_function::Function = (x) -&gt; 30 * 2^(x / 500)</code>: Function that changes the magnitude  of the change vector of the parameters wrt the epoch.</li><li><code>train_ix::Union{Nothing, Vector{&lt;:Integer}} = nothing</code>: Indices of the generators used  for training if they are not supposed to be picked randomly.</li><li><code>test_ix::Union{Nothing, Vector{&lt;:Integer}} = nothing</code>: Indices of the generators used  for testing if they are not supposed to be picked randomly.</li></ul><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>If the training and test generators are not supposed to be picked randomly, both <code>train_ix</code> and <code>test_ix</code> need to be passed.</p></div></div></div><a class="docs-sourcelink" target="_blank" href="https://github.com/julianfritzsch/ContGridModML.jl/blob/6390688616ca4e6cf6246d054b17957d574fe3f0/src/dynamic.jl#L494">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ContGridModML.load_sol" href="#ContGridModML.load_sol"><code>ContGridModML.load_sol</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">load_sol(
    fn::String
) -&gt; Union{ContGridModML.DynamicSol, ContGridModML.StaticSol}
</code></pre><p>Load a solution from a HDF5 file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/julianfritzsch/ContGridModML.jl/blob/6390688616ca4e6cf6246d054b17957d574fe3f0/src/tools.jl#L67">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="ContGridModML.save_sol" href="#ContGridModML.save_sol"><code>ContGridModML.save_sol</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">save_sol(fn::String, sol::ContGridModML.ContSol)
</code></pre><p>Save a solution to a HDF5 file.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/julianfritzsch/ContGridModML.jl/blob/6390688616ca4e6cf6246d054b17957d574fe3f0/src/tools.jl#L3">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Introduction</a><a class="docs-footer-nextpage" href="../internal/dynamic/">Dynamic.jl »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.25 on <span class="colophon-date" title="Tuesday 25 July 2023 08:41">Tuesday 25 July 2023</span>. Using Julia version 1.9.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
